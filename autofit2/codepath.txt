

' Typical codepath, AFTER first call...


' Calculations are now only performed when device size or zoom level
' is changed, whereas everything was done on every update previously...


Method UpdateVirtualDisplay (zoomborders:Bool, keepborders:Bool)

	If (DeviceWidth <> lastdevicewidth)...			' Early out here and nothing to do...
	If device_changed...						' Nothing to do here...
	If vzoom <> lastvzoom...					' Nothing to do here...
	If zoom_changed Or device_changed...			' Nothing to do here...

	SetScissor 0, 0, DeviceWidth, DeviceHeight		' Draw outer border...
	Cls 0, 0, 0

	SetScissor sx, sy, sw, sh					' Create inner area...
	Scale multi * vzoom, multi * vzoom

	If vzoom Then Translate vxoff, vyoff			' Always called unless zoom is zero...
	
End
